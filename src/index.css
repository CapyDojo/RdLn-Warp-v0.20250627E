@tailwind base;
@tailwind components;
@tailwind utilities;

/* Enhanced Glassmorphic Design with Vivid Dynamic Effects */
:root {
  /* Default fallback values - will be overridden by ThemeContext */
  --glass-opacity: 0.8;
  --glass-blur: 24px;
  --glass-shadow: 0 12px 48px rgba(31, 38, 135, 0.5);
  --glass-transition: 300ms;
  --glass-border: rgba(255, 255, 255, 0.25);
  --gradient-start: rgba(255, 255, 255, 0.35);
  --gradient-middle: rgba(255, 255, 255, 0.25);
  --gradient-end: rgba(255, 255, 255, 0.15);
  --gradient-accent: rgba(255, 255, 255, 0.4);
}

/* Clean Glass Panel - Optimized blur to prevent banding */
.glass-panel {
  position: relative;
  backdrop-filter: blur(calc(var(--glass-blur) * 0.75)) saturate(1.4);
  -webkit-backdrop-filter: blur(calc(var(--glass-blur) * 0.75)) saturate(1.4);
  background: rgba(255, 255, 255, 0.1) !important;
  box-shadow: var(--glass-shadow);
  border-radius: 12px;
  border: 1px solid var(--glass-border);
  transition: all var(--glass-transition) cubic-bezier(0.4, 0, 0.2, 1);
  overflow: hidden;
}

/* Glass Panel Hover Effects */
.glass-panel:hover {
  transform: translateY(-2px);
  box-shadow: var(--glass-shadow), 0 4px 16px rgba(0, 0, 0, 0.1);
  border-color: var(--gradient-accent);
}

/* Glass Panel Clean Hover Effects - No Banding */
.glass-panel {
  transition: all 400ms cubic-bezier(0.4, 0, 0.2, 1);
}

.glass-panel:hover {
  backdrop-filter: blur(calc(var(--glass-blur) * 1.1)) saturate(1.1);
  -webkit-backdrop-filter: blur(calc(var(--glass-blur) * 1.1)) saturate(1.1);
  border-color: rgba(255, 255, 255, 0.4);
}

/* DEFINITIVE FIX: Force transparent base layers */
html {
  height: 100% !important;
  margin: 0 !important;
  padding: 0 !important;
  background: transparent !important;
}

body {
  height: 100% !important;
  margin: 0 !important;
  padding: 0 !important;
  /* Background will be set by ThemeContext with !important */
}

#root {
  min-height: 100vh !important;
  background: transparent !important;
}

/* FORCE REMOVE ANY CONFLICTING STYLES */
* {
  box-sizing: border-box;
}

/* Global text legibility improvements - WCAG AAA compliance with 10% safety margin */

/* Professional theme global text */
[data-theme="professional"] {
  --text-body: #1e293b;
  --text-header: #0f172a;
  --text-secondary: #475569;
  --text-interactive: #ea580c;
  --text-success: #1d4ed8;
  --text-on-glass: #1e293b;
}

/* Bamboo theme global text */
[data-theme="bamboo"] {
  --text-body: #0f140f;
  --text-header: #1a3f1a;
  --text-secondary: #44403c;
  --text-interactive: #a06d15;
  --text-success: #256325;
  --text-on-glass: #0f140f;
}

/* Apple Light theme global text */
[data-theme="apple-light"] {
  --text-body: #111827;
  --text-header: #1f2937;
  --text-secondary: #4b5563;
  --text-interactive: #7c3aed;
  --text-success: #0284c7;
  --text-on-glass: #111827;
}

/* Apple Dark theme global text */
[data-theme="apple-dark"] {
  --text-body: #f5f5f5;
  --text-header: #ffffff;
  --text-secondary: #d4d4d4;
  --text-interactive: #a78bfa;
  --text-success: #80deea;
  --text-on-glass: #f5f5f5;
}

/* Kyoto theme global text - Dark autumn night inspired */
[data-theme="kyoto"] {
  --text-body: #fafaf9;      /* Tatami white - light text for dark background */
  --text-header: #f0fdf4;    /* Lightest forest green - headers */
  --text-secondary: #d6d3d1; /* Light stone - secondary text */
  --text-interactive: #f8b4b4; /* Light maple red - interactive elements */
  --text-success: #bbf7d0;   /* Light forest green - success states */
  --text-on-glass: #fafaf9; /* Light text for glass panels */
}

/* New York theme global text */
[data-theme="new-york"] {
  --text-body: #fafafa;
  --text-header: #ffffff;
  --text-secondary: #e0e0e0;
  --text-interactive: #ffb74d;
  --text-success: #4dd0e1;
  --text-on-glass: #fafafa;
}

/* Global text hierarchy classes */
.text-body,
textarea,
input[type="text"],
input[type="email"],
input[type="password"],
p,
span:not(.text-header):not(.text-secondary) {
  color: var(--text-body) !important;
  line-height: 1.6 !important;
}

.text-header,
h1, h2, h3, h4, h5, h6 {
  color: var(--text-header) !important;
  font-weight: 600 !important;
  line-height: 1.4 !important;
}

.text-secondary,
.text-sm,
.text-xs,
label {
  color: var(--text-secondary) !important;
}

.text-interactive,
button,
a,
.cursor-pointer {
  color: var(--text-interactive) !important;
}

.text-success,
.text-active {
  color: var(--text-success) !important;
}

/* Enhanced readability for glass panels */
.glass-panel .text-body,
.glass-panel textarea,
.glass-panel input,
.glass-panel p,
.glass-panel span:not(.text-header):not(.text-secondary) {
  color: var(--text-on-glass) !important;
  font-weight: 500 !important;
}

/* Legal document specific improvements */
.libertinus-math-text {
  color: var(--text-body) !important;
  font-weight: 500 !important;
  line-height: 1.7 !important;
  letter-spacing: 0.01em !important;
}

/* Focus states for accessibility */
button:focus,
a:focus,
input:focus,
textarea:focus {
  outline: 2px solid var(--text-interactive) !important;
  outline-offset: 2px !important;
}

/* Floating Header - Ensure it stays fixed during scroll */
.floating-header {
  position: fixed !important;
  top: 1rem !important;
  left: 50% !important;
  transform: translateX(-50%) !important;
  z-index: 9999 !important;
  width: 100% !important;
  max-width: 72rem !important;
  padding-left: 1rem !important;
  padding-right: 1rem !important;
}

/* Selection states */
::selection {
  background: var(--text-interactive) !important;
  color: white !important;
}

/* ENSURE BACKDROP-FILTER WORKS */
.glass-panel {
  isolation: isolate !important;
}

/* Enhanced Glass Button Effects - No Gradients */
.enhanced-button {
  position: relative;
  backdrop-filter: blur(calc(var(--glass-blur) * 0.6)) saturate(1.5);
  background: rgba(255, 255, 255, 0.15) !important;
  border: 1px solid var(--glass-border);
  transition: all var(--glass-transition) cubic-bezier(0.4, 0, 0.2, 1);
  overflow: hidden;
}

.enhanced-button:hover {
  transform: translateY(-1px) scale(1.02);
  box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
  border-color: rgba(255, 255, 255, 0.4);
  backdrop-filter: blur(calc(var(--glass-blur) * 0.7)) saturate(1.3);
}

/* Enhanced Glass Input Fields - No Gradients */
.glass-input-field {
  backdrop-filter: blur(calc(var(--glass-blur) * 0.4)) saturate(1.2);
  background: rgba(255, 255, 255, 0.08) !important;
  border: 1px solid rgba(255, 255, 255, 0.2);
  transition: all var(--glass-transition) ease;
}

.glass-input-field:focus {
  backdrop-filter: blur(var(--glass-blur)) saturate(1.4);
  background: rgba(255, 255, 255, 0.12) !important;
  border-color: rgba(255, 255, 255, 0.4);
  box-shadow: 0 0 0 3px rgba(var(--color-primary-500-rgb), 0.1);
}

/* Glass Panel Headers and Footers - No Gradients */
.glass-panel-header-footer {
  backdrop-filter: blur(calc(var(--glass-blur) * 0.8));
  background: rgba(255, 255, 255, 0.12) !important;
  border-bottom: 1px solid var(--glass-border);
}

.glass-panel-inner-content {
  backdrop-filter: blur(calc(var(--glass-blur) * 0.3));
  background: rgba(255, 255, 255, 0.03) !important;
}

/* Premium Animation Effects */
@keyframes glassShimmer {
  0% {
    transform: translateX(-100%);
  }
  50% {
    transform: translateX(100%);
  }
  100% {
    transform: translateX(100%);
  }
}

.glass-panel-premium::after {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(255, 255, 255, 0.05);
  opacity: 0;
  transform: translateX(-100%);
  animation: glassShimmer 3s infinite;
  pointer-events: none;
}

/* Enhanced Focus States */
.glass-panel:focus-within {
  border-color: var(--gradient-accent);
  box-shadow: var(--glass-shadow), 0 0 0 3px rgba(var(--color-primary-500-rgb), 0.1);
}
